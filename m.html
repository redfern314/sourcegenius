<head>
  <title>SourceGenius</title>
</head>

<body>
    <div class="container">
      <div class="row">
        <div class="col-md-8 col-md-offset-2">
			<header>
				<div class="row">
				    <div class="col-md-12">
				        <ul class="actions">
				            <li><a href="/new"><span class="glyphicon glyphicon-plus"></span></a></li>
				            <li class="user">
				            	{{> user }}
				            </li>
				        </ul>
				    </div>
				</div>
			</header>

			<div class="wrapper">

			{{ renderPage }}
				
			</div>

          	<footer>
          	</footer>
      	</div>
    </div>
</body>


<template name="user">
    <div id="user">
        {{#if loggedIn }}
        	<a href="/github"><img id="octocat" src="/octocat.png" width="50" height="50"></a>
            <a href="#"><img id="propic" alt="Click to sign out" height="50" width="50" src={{ URL }}></a>
        {{ else }}
            <a id="signin" href="#">sign in</a>
        {{/if }}
    </div>
</template>


<template name="home">
  {{#if loggedIn}}
    <div id="your-sources">
      {{#each userSources}}
        {{> userSourceTemplate }}
      {{/each}}
     </div>
    <div id="shared-with-you">
      {{#each sharedSources }}
        {{> sharedSourceTemplate }}
      {{/each }}
    </div>
    {{> newFile}}
  {{ else }}
    Not logged in!
  {{/if}}
</template>

<template name='userSourceTemplate'>
  <a href='/show/{{_id}}'><div>{{ name }}</div></a>
</template>

<template name="github">
	<div class="row github">
    	<div class="col-md-12">
            <div class="text-container">
                <h3>Username</h3>
                <input id='username' width='100' value={{ username }}>
                <button id='submitusername'>Submit</button>
            </div>
    	</div>
    </div>
</template>

<template name='sharedSourceTemplate'>
  <a href='/show/{{_id}}'><div>{{ name }}</div></a>
</template>  

<template name="newFile">
    <div class="row newFile">
    	<div class="col-md-12">
            <input style='width:100%; margin-bottom:10px;' id='title' place='Title Your Source'></input>
            <div class="text-container">
                <textarea width='500' class="language-any" id="newFileEntry"></textarea>
                <div class="function save enabled" id='submit-new-file'></div>
            </div>
    	</div>
    </div>
</template>

<template name="annotations">
    {{#each annos}}
      {{#isolate}}
        {{> annotation }}
      {{/isolate}}
    {{/each}}
    <div class="add">
        {{#if hasAnnotations }}
        {{else}}
        <h1>Add an annotation</h1>
        {{/if }}
        <textarea id='annotation'></textarea>
        <button id="annotateBtn" type="button" class="btn btn-default btn-block b">annotate</button>
    </div>
</template>

<template name="annotation">
    <div class="annotation">
      <div class="content row">
        {{#if editing this}}
          <textarea data-id='{{ _id }}'>{{ text }}</textarea>
        {{ else }}
          <div class="col-md-10">
              <p>{{ text  }}</p>
          </div>
          {{#if canEdit this}}
            <div class="col-mid-2" style='text-align:right;'>
              <a style='cursor:pointer;' class='edit' data-id='{{ _id }}'>Edit</a>
            </div>
          {{/if}}
        {{/if}}
      </div>
      <div class="author">
          <img src="http://placekitten.com/75/75" alt="">
          <h6 class="handle">{{ author.services.github.username }}</h6>
          <div class="cler"></div>
      </div>
      <div class="clear"></div>
  </div>
</template>

<template name="show">
	<div class="row">
    <div class="col-md-12 code-container">
        <div class="snippet">
            {{#each splitLines}}
                <div class="{{this.cssClasses}}" data-id="{{this.index}}">
                    <pre class="language-{{this.language}}"><code class='language-{{this.language}}'>{{this.text}}</code></pre>
                </div>
            {{/each}}
        </div>
	</div>
    {{#isolate}}
      <div class='annotations' style='display:none;'>
        {{> annotations}}
      </div>
    {{/isolate}}
</template>

<template name="signIn">
	{{ loginButtons }}
</template>

